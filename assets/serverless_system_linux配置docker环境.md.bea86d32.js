import{_ as s,o as a,c as l,X as o}from"./chunks/framework.28451963.js";const D=JSON.parse('{"title":"Linux配置容器环境","description":"","frontmatter":{},"headers":[],"relativePath":"serverless/system/linux配置docker环境.md","filePath":"serverless/system/linux配置docker环境.md","lastUpdated":1704191114000}'),n={name:"serverless/system/linux配置docker环境.md"},e=o(`<h1 id="linux配置容器环境" tabindex="-1">Linux配置容器环境 <a class="header-anchor" href="#linux配置容器环境" aria-label="Permalink to &quot;Linux配置容器环境&quot;">​</a></h1><h2 id="_1、安装docker" tabindex="-1">1、安装docker <a class="header-anchor" href="#_1、安装docker" aria-label="Permalink to &quot;1、安装docker&quot;">​</a></h2><h3 id="_1-1、一键安装" tabindex="-1">1.1、一键安装 <a class="header-anchor" href="#_1-1、一键安装" aria-label="Permalink to &quot;1.1、一键安装&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><code>docker</code>安装好后默认路径为 <code>/var/lib/docker</code> ，其下的<code>containers</code>文件夹为容器文件夹，<code>image</code>为镜像文件夹</p></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#安装命令</span></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-fsSL</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://get.docker.com</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--mirror</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Aliyun</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#或使用国内 daocloud 一键安装命令</span></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-sSL</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://get.daocloud.io/docker</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">或者</span></span>
<span class="line"><span style="color:#FFCB6B;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-qO-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get.docker.com</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bash</span></span></code></pre></div><h3 id="_1-2、手动安装" tabindex="-1">1.2、手动安装 <a class="header-anchor" href="#_1-2、手动安装" aria-label="Permalink to &quot;1.2、手动安装&quot;">​</a></h3><h4 id="_1-2-1、安装依赖包" tabindex="-1">1.2.1、安装依赖包 <a class="header-anchor" href="#_1-2-1、安装依赖包" aria-label="Permalink to &quot;1.2.1、安装依赖包&quot;">​</a></h4><blockquote><p>yum-util 提供的yum-config-manager devicemapper存储驱动程序需要依赖 device-mapper-persistent-data 和 lvm2</p></blockquote><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#安装命令</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yum-utils</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">device-mapper-persistent-data</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">lvm2</span></span></code></pre></div><h4 id="_1-2-2、设置yum源" tabindex="-1">1.2.2、设置yum源 <a class="header-anchor" href="#_1-2-2、设置yum源" aria-label="Permalink to &quot;1.2.2、设置yum源&quot;">​</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#官方源（慢，国内不建议）</span></span>
<span class="line"><span style="color:#FFCB6B;">yum-config-manager</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-repo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://download.docker.com/linux/centos/docker-ce.repo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#阿里源</span></span>
<span class="line"><span style="color:#FFCB6B;">yum-config-manager</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-repo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#清华大学源</span></span>
<span class="line"><span style="color:#FFCB6B;">yum-config-manager</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-repo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/centos/docker-ce.repo</span></span></code></pre></div><h4 id="_1-2-3、安装docker-ce-社区版-免费" tabindex="-1">1.2.3、安装docker ce（社区版|免费） <a class="header-anchor" href="#_1-2-3、安装docker-ce-社区版-免费" aria-label="Permalink to &quot;1.2.3、安装docker ce（社区版|免费）&quot;">​</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#安装命令</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce-cli</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">containerd.io</span></span></code></pre></div><h4 id="_1-2-4、安装指定版本" tabindex="-1">1.2.4、安装指定版本 <a class="header-anchor" href="#_1-2-4、安装指定版本" aria-label="Permalink to &quot;1.2.4、安装指定版本&quot;">​</a></h4><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>使用<code>yum list docker-ce --showduplicates | sort -r</code>查看可用版本</li><li>安装指定版本</li></ul></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">查看可用版本</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">list</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--showduplicates</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">sort</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-r</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">如：</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce.x86_64</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">:20.10.9-3.el7</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">docker-ce-stable</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">安装指定版本</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce-20.10.9</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce-cli-20.10.9</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">containerd.io</span></span></code></pre></div><h4 id="_1-2-5、修改docker文件路径" tabindex="-1">1.2.5、修改docker文件路径 <a class="header-anchor" href="#_1-2-5、修改docker文件路径" aria-label="Permalink to &quot;1.2.5、修改docker文件路径&quot;">​</a></h4><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>vim /etc/docker/daemon.json</p></div><p>内容如下：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">&quot;data-root&quot;</span><span style="color:#82AAFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/data/docker</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h2 id="_2、安装docker-compose" tabindex="-1">2、安装docker-compose <a class="header-anchor" href="#_2、安装docker-compose" aria-label="Permalink to &quot;2、安装docker-compose&quot;">​</a></h2><h3 id="_2-1、安装" tabindex="-1">2.1、安装 <a class="header-anchor" href="#_2-1、安装" aria-label="Permalink to &quot;2.1、安装&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://github.com/docker/compose/releases/download/1.23.2/docker-compose-</span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">uname</span><span style="color:#C3E88D;"> -s</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">-</span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">uname</span><span style="color:#C3E88D;"> -m</span><span style="color:#89DDFF;">)&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/bin/docker-compose</span></span></code></pre></div><h3 id="_2-2、给docker-compose执行权限" tabindex="-1">2.2、给docker-compose执行权限 <a class="header-anchor" href="#_2-2、给docker-compose执行权限" aria-label="Permalink to &quot;2.2、给docker-compose执行权限&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/bin/docker-compose</span></span></code></pre></div><h3 id="_2-3、检查docker-compose版本" tabindex="-1">2.3、检查docker-compose版本 <a class="header-anchor" href="#_2-3、检查docker-compose版本" aria-label="Permalink to &quot;2.3、检查docker-compose版本&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--version</span></span></code></pre></div><h2 id="_3、docker命令" tabindex="-1">3、docker命令 <a class="header-anchor" href="#_3、docker命令" aria-label="Permalink to &quot;3、docker命令&quot;">​</a></h2><h3 id="_3-1、启动docker" tabindex="-1">3.1、启动docker <a class="header-anchor" href="#_3-1、启动docker" aria-label="Permalink to &quot;3.1、启动docker&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">或者</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">service</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span></span></code></pre></div><h3 id="_3-2、停止docker" tabindex="-1">3.2、停止docker <a class="header-anchor" href="#_3-2、停止docker" aria-label="Permalink to &quot;3.2、停止docker&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">或者</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">service</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span></span></code></pre></div><h3 id="_3-3、重启docker" tabindex="-1">3.3、重启docker <a class="header-anchor" href="#_3-3、重启docker" aria-label="Permalink to &quot;3.3、重启docker&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">或者</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">service</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span></span></code></pre></div><h3 id="_3-4、查看docker状态" tabindex="-1">3.4、查看docker状态 <a class="header-anchor" href="#_3-4、查看docker状态" aria-label="Permalink to &quot;3.4、查看docker状态&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">status</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">或者</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">service</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">status</span></span></code></pre></div><h3 id="_3-5、查看docker进程" tabindex="-1">3.5、查看docker进程 <a class="header-anchor" href="#_3-5、查看docker进程" aria-label="Permalink to &quot;3.5、查看docker进程&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ps</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-ef</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span></span></code></pre></div>`,38),p=[e];function c(t,r,i,C,y,d){return a(),l("div",null,p)}const A=s(n,[["render",c]]);export{D as __pageData,A as default};
